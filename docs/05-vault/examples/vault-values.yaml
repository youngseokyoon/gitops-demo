# Vault Helm Values
# 이 파일은 Kind 클러스터에서 Vault를 설치할 때 사용합니다.
# 사용법: helm install vault hashicorp/vault --values vault-values.yaml

# Vault 서버 설정
server:
  # 개발 모드 비활성화 (운영 환경 시뮬레이션)
  dev:
    enabled: false
    
  # Standalone 모드로 실행
  standalone:
    enabled: true
    config: |
      ui = true
      
      listener "tcp" {
        tls_disable = 1
        address = "[::]:8200"
        cluster_address = "[::]:8201"
      }
      
      storage "file" {
        path = "/vault/data"
      }
      
      # 감사 로그 (선택사항)
      # audit {
      #   file {
      #     file_path = "/vault/logs/audit.log"
      #   }
      # }
  
  # NodePort 서비스로 외부 접근 허용
  service:
    type: NodePort
    nodePort: 30000
    annotations: {}
  
  # 데이터 영구 저장
  dataStorage:
    enabled: true
    size: 10Gi
    storageClass: null  # 기본 StorageClass 사용
    accessMode: ReadWriteOnce
  
  # 감사 로그 스토리지 (선택사항)
  auditStorage:
    enabled: false
    size: 10Gi
  
  # 리소스 제한
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  # 환경 변수 (선택사항)
  extraEnvironmentVars: {}
  #   VAULT_LOG_LEVEL: debug
  
  # 라벨
  labels: {}
  
  # Annotations
  annotations: {}

# Vault UI 설정
ui:
  enabled: true
  serviceType: NodePort
  serviceNodePort: 30000
  externalPort: 8200

# Vault Agent Injector 설정
# VSO를 사용하는 경우 비활성화 가능
injector:
  enabled: true
  
  # Injector 리소스
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  # 라벨
  labels: {}
  
  # Annotations
  annotations: {}

# 전역 설정
global:
  # TLS 비활성화 (개발 환경용)
  tlsDisable: true
  
  # Namespace
  # namespace: vault
